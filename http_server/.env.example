# KataGo HTTP服务环境变量配置示例
# 复制此文件为 .env 并根据需要修改配置

# =============================================================================
# 基本服务配置
# =============================================================================

# HTTP服务端口
HTTP_PORT=8080

# 备用端口
HTTP_BACKUP_PORT=8081

# 服务绑定地址 (0.0.0.0 表示所有接口)
HTTP_HOST=0.0.0.0

# 服务实例ID (多实例部署时使用)
INSTANCE_ID=1

# =============================================================================
# KataGo配置
# =============================================================================

# KataGo配置文件路径
KATAGO_CONFIG=/app/configs/katago_http.cfg

# KataGo模型文件路径
KATAGO_MODEL=/app/models/model.bin.gz

# KataGo可执行文件路径
KATAGO_BINARY=/app/bin/katago

# 分析线程数
ANALYSIS_THREADS=4

# 最大并发评估数
MAX_CONCURRENT_EVALS=2

# 最大批处理大小
MAX_BATCH_SIZE=8

# =============================================================================
# GPU配置
# =============================================================================

# CUDA可见设备 (GPU ID，多个用逗号分隔)
CUDA_VISIBLE_DEVICES=0

# NVIDIA可见设备
NVIDIA_VISIBLE_DEVICES=all

# NVIDIA驱动能力
NVIDIA_DRIVER_CAPABILITIES=compute,utility

# GPU内存分配策略
CUDA_MEMORY_FRACTION=0.9

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 日志目录
LOG_DIR=/app/logs

# 是否记录所有请求
LOG_ALL_REQUESTS=true

# 是否记录所有响应
LOG_ALL_RESPONSES=false

# 是否记录搜索信息
LOG_SEARCH_INFO=false

# 日志文件最大大小 (MB)
LOG_MAX_SIZE=100

# 日志文件保留数量
LOG_MAX_FILES=10

# =============================================================================
# 性能配置
# =============================================================================

# 默认最大访问数
DEFAULT_MAX_VISITS=1000

# 默认最大游戏数
DEFAULT_MAX_PLAYOUTS=10000

# 默认最大时间 (秒)
DEFAULT_MAX_TIME=10.0

# 神经网络最大批处理大小
NN_MAX_BATCH_SIZE=32

# 神经网络缓存大小 (2的幂)
NN_CACHE_SIZE_POWER=20

# 搜索线程数
NUM_SEARCH_THREADS=8

# =============================================================================
# HTTP服务器配置
# =============================================================================

# HTTP请求最大大小 (MB)
HTTP_MAX_REQUEST_SIZE=64

# HTTP超时时间 (秒)
HTTP_TIMEOUT=30

# HTTP保持连接时间 (秒)
HTTP_KEEP_ALIVE=60

# HTTP最大连接数
HTTP_MAX_CONNECTIONS=100

# 启用CORS
ENABLE_CORS=true

# CORS允许的源 (多个用逗号分隔)
CORS_ORIGINS=*

# =============================================================================
# 安全配置
# =============================================================================

# API密钥 (可选，用于认证)
# API_KEY=your_secret_api_key_here

# JWT密钥 (可选，用于JWT认证)
# JWT_SECRET=your_jwt_secret_here

# 启用API密钥认证
ENABLE_API_KEY_AUTH=false

# 启用速率限制
ENABLE_RATE_LIMIT=true

# 每秒最大请求数
RATE_LIMIT_PER_SECOND=10

# 分析请求每秒最大数
ANALYSIS_RATE_LIMIT_PER_SECOND=2

# =============================================================================
# 监控配置
# =============================================================================

# 启用Prometheus指标
ENABLE_PROMETHEUS=true

# Prometheus指标端口
PROMETHEUS_PORT=9090

# 启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 缓存配置
# =============================================================================

# 启用Redis缓存
ENABLE_REDIS=false

# Redis主机
REDIS_HOST=redis

# Redis端口
REDIS_PORT=6379

# Redis数据库
REDIS_DB=0

# Redis密码
# REDIS_PASSWORD=your_redis_password

# 缓存过期时间 (秒)
CACHE_EXPIRE_TIME=3600

# =============================================================================
# 数据库配置 (可选)
# =============================================================================

# 启用数据库记录
ENABLE_DATABASE=false

# 数据库类型 (sqlite, postgresql, mysql)
DATABASE_TYPE=sqlite

# 数据库URL
# DATABASE_URL=sqlite:///app/data/katago.db
# DATABASE_URL=postgresql://user:password@localhost:5432/katago
# DATABASE_URL=mysql://user:password@localhost:3306/katago

# =============================================================================
# 开发配置
# =============================================================================

# 开发模式
DEVELOPMENT_MODE=false

# 调试模式
DEBUG_MODE=false

# 启用热重载
ENABLE_HOT_RELOAD=false

# 启用详细错误信息
ENABLE_VERBOSE_ERRORS=false

# =============================================================================
# Docker配置
# =============================================================================

# Docker容器名称
CONTAINER_NAME=katago-http-server

# Docker网络
DOCKER_NETWORK=katago-network

# Docker重启策略
DOCKER_RESTART_POLICY=unless-stopped

# =============================================================================
# 生产环境配置
# =============================================================================

# 环境类型 (development, staging, production)
ENVIRONMENT=development

# 启用SSL/TLS
ENABLE_SSL=false

# SSL证书文件路径
# SSL_CERT_PATH=/etc/ssl/certs/katago.crt

# SSL私钥文件路径
# SSL_KEY_PATH=/etc/ssl/private/katago.key

# 启用负载均衡
ENABLE_LOAD_BALANCER=false

# 负载均衡器类型 (nginx, haproxy)
LOAD_BALANCER_TYPE=nginx

# =============================================================================
# 通知配置 (可选)
# =============================================================================

# 启用邮件通知
ENABLE_EMAIL_NOTIFICATIONS=false

# SMTP服务器
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password

# 启用Slack通知
ENABLE_SLACK_NOTIFICATIONS=false

# Slack Webhook URL
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# =============================================================================
# 备份配置 (可选)
# =============================================================================

# 启用自动备份
ENABLE_AUTO_BACKUP=false

# 备份目录
BACKUP_DIR=/app/backups

# 备份间隔 (小时)
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=7

# =============================================================================
# 自定义配置
# =============================================================================

# 自定义配置文件路径
# CUSTOM_CONFIG_PATH=/app/configs/custom.cfg

# 自定义脚本路径
# CUSTOM_SCRIPT_PATH=/app/scripts/custom.sh

# 自定义环境变量
# CUSTOM_VAR_1=value1
# CUSTOM_VAR_2=value2